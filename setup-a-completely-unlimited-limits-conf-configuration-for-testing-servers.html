<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Setup a Completely Unlimited limits.conf Configuration for Testing Servers - JoltVib</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="No Limits! We may all like no limits, but is it really such a good idea? Usually, when there are no limits, 'there'll be dragons'. It is the same with limits.conf, though for testing servers, a truly unlimited limits.conf helps!"><meta name=robots content="index,follow,noarchive"><meta property="og:title" content="Setup a Completely Unlimited limits.conf Configuration for Testing Servers"><meta property="og:description" content="No Limits! We may all like no limits, but is it really such a good idea? Usually, when there are no limits, 'there'll be dragons'. It is the same with limits.conf, though for testing servers, a truly unlimited limits.conf helps!"><meta property="og:type" content="article"><meta property="og:url" content="/setup-a-completely-unlimited-limits-conf-configuration-for-testing-servers.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-07-21T00:00:00+00:00"><meta property="article:modified_time" content="2024-07-21T00:00:00+00:00"><meta itemprop=name content="Setup a Completely Unlimited limits.conf Configuration for Testing Servers"><meta itemprop=description content="No Limits! We may all like no limits, but is it really such a good idea? Usually, when there are no limits, 'there'll be dragons'. It is the same with limits.conf, though for testing servers, a truly unlimited limits.conf helps!"><meta itemprop=datePublished content="2024-07-21T00:00:00+00:00"><meta itemprop=dateModified content="2024-07-21T00:00:00+00:00"><meta itemprop=wordCount content="1103"><meta itemprop=keywords content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/mainroad/css/style.css><link rel="shortcut icon" href=./favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=./index.html title=JoltVib rel=home><div class="logo__item logo__text"><div class=logo__title>JoltVib</div></div></a></div><div class=divider></div></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Setup a Completely Unlimited limits.conf Configuration for Testing Servers</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2024-07-21T00:00:00Z>July 21, 2024</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=./categories/blog/ rel=category>blog</a></span></div></div></header><div class="content post__content clearfix"><h3>Quick Links</h3><ul class=table-content-level-1><li><a href=#>What Is limits.conf?</a></li></ul><ul class=table-content-level-1><li><a href=#>Going Unlimited</a></li></ul><ul class=table-content-level-1><li><a href=#>Wrapping up</a></li></ul><p>No Limits! We may all like no limits, but is it really such a good idea? Usually, when there are no limits, 'there'll be dragons'. It is the same with limits.conf, though for testing servers, a truly unlimited limits.conf helps!</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=what-is-limits-conf>What Is <i>limits.conf</i>?</h2><p>The <code>limits.conf</code> file contains resource limit settings for the Linux operating system. When your Linux computer was installed, the file was created as part of the installation and contained values for resources like virtual memory size, the maximum number of files, and more.</p><p>These values are set to pre-specified limits to ensure that your Linux system will not easily overload. Otherwise, a rogue program or process could easily bring an otherwise performant system to a halt. Picture, for example, a situation where you set the maximum number of open files to unlimited, and a rogue process (being a process with a fault in it, or even a malicious piece of software like a virus or malware) now starts opening file after file on the system.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Soon the system will run out of a resource it needs to handle all these open files. Whether it be the processor in your system (the CPU), or memory or even disk in some cases, where for example, we may have configured the maximum core file size as unlimited, and we run large processes in a system with much memory and little free remaining space, or a small root drive.</p><p>In summary, using the <code>limits.conf</code> configuration file, a user (or sysadmin) can specify limits on resources available to the user and to the system.</p><p>The format of the <code>limits.conf</code> file (which resides in</p><pre><code class=hljs>/etc/security/</code> </pre><p>) is well defined. Generally, we will specify an applicable domain (like a user, a group, and even wildcards like</p><pre><code class=hljs>*</code> </pre><p>), a type (soft or hard limit), an item that the rule relates to (like the <code>nofile</code> item which defines the maximum number of open files, the</p><pre><code class=hljs>locks</code> </pre><p>item which defines the maximum number of file locks a user can hold, etc.) and finally a value (the actual setting/maximum).</p><p>The header of the <code>limits.conf</code> file clearly defines this in a suitable amount of detail:</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong> <img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/csit/2021/03/6846fd2c.png><p>If you would like to read more about each specific item and other configuration settings with the <code>limits.conf</code> file, simply execute:</p><pre>man limits.conf  </pre><p>At your terminal prompt.</p><img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/csit/2021/03/90b1c8a1.png><h2 id=going-unlimited>Going Unlimited</h2><p>In general, for all intents and purposes, one should never go unlimited with <code>limits.conf</code>. Then, you may ask, why this article? Well, whenever there is a rule, there is a valid exception. The exception, in this case, is for testing servers. When you do testing or Quality Assurance work of any kind, you will often run into the limits of a system.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Setting things up as unlimited, with a proper test/QA framework setup to take care of system resource management, is a valid exception to keeping reasonable and system-specific limits inside <code>limits.conf</code>. For all other servers, as indicated, a per-server configuration is preferred and recommended.</p><p>Without further ado, let us introduce a script which sets all variables and options in <code>limits.conf</code> to unlimited. This script is based on the GPLv2 licensed <a href=#>setup_server.sh</a> script in the mariadb-qa repository on GitHub. You may also like to explore this script for other files you can adopt towards unlimited settings for a test server setup, for example <code>/etc/sysctl.conf</code> settings and <code>/etc/systemd/logind.conf</code></p><p>To configure a server towards unlimited, execute the following script at the terminal prompt of the (test) server you want to configure as unlimited.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Warning: please note that doing this on a production machine is likely not a good idea unless you have a solid understanding of the change you are making, as explained in part in this article, and are making it for a specific and valid reason. Doing this change also has significant security implications, and it is recommended to do this only on a machine that is behind a firewall and VPN, i.e., not a public-facing server. TLDR; Proceeding to implement this is at your own risk.</p><p>You should also know that using a high number (greater than ~20000) for soft and hard nproc may cause system instability and hangs on Centos 7, though not on Ubuntu 18, 19, and 20. I, and other engineers with me, have used this setup for quite some time for testing servers, and for that application, it is ideal. Note how all of the settings are unlimited except <code>nofile</code> for which 1048576 is the maximum.</p><pre>sudo bash -c "cat &lt;&lt; EOF &gt; /etc/security/limits.conf <strong class="an-zone-tag-top ad-zone-advertising-tag"></strong>  <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong>  <p>* soft core unlimited</p>  <p>* hard core unlimited</p>  <p>* soft data unlimited</p>  <p>* hard data unlimited</p>  <p>* soft fsize unlimited</p>  <p>* hard fsize unlimited</p>  <p>* soft memlock unlimited</p>  <p>* hard memlock unlimited</p>  <p>* soft nofile 1048576</p>  <p>* hard nofile 1048576</p>  <p>* soft rss unlimited</p>  <p>* hard rss unlimited</p>  <p>* soft stack unlimited</p>  <p>* hard stack unlimited</p>  <p>* soft cpu unlimited</p>  <p>* hard cpu unlimited</p>  <p>* soft nproc unlimited</p>  <p>* hard nproc unlimited</p>  <p>* soft as unlimited</p>  <p>* hard as unlimited</p>  <p>* soft maxlogins unlimited</p>  <p>* hard maxlogins unlimited</p>  <p>* soft maxsyslogins unlimited</p>  <p>* hard maxsyslogins unlimited</p>  <p>* soft locks unlimited</p>  <p>* hard locks unlimited</p>  <p>* soft sigpending unlimited</p>  <p>* hard sigpending unlimited</p>  <p>* soft msgqueue unlimited</p>  <p>* hard msgqueue unlimited</p>  <p>EOF"</p>  </pre><p>Once you executed this, simply restart your server to load all of the new configuration settings. You will not notice any difference, except that your test runs, if they were very resource-intensive, will not halt on various limit configuration issues anymore.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>That said, as indicated above, you will need, as part of your testing framework, a solid watchdog and server resources monitoring process which ensures that your server does not become overused, which often results in hangs and reboot requirements. In a future article, I may provide the basics for such a script from where you can expand to cover your own setup.</p><h2 id=wrapping-up>Wrapping up</h2><p>There are valid use cases for setting <code>/etc/security/limits.conf</code> to every possible maximum. They are generally rare (with testing servers being a notable exception).</p><p>In this article, we learned more about <code>limits.conf</code>: why it exists, and how to change its configuration. We explored the&nbsp;<code>limits.conf</code>&nbsp;format, syntax, and idioms and listed a simple script that can set all of our settings to unlimited.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Even if you want to configure your server to lesser limits, the script is easy to adapt and can be integrated (as GPLv2 code as described) into your own scripts: simply change <code>unlimited</code> to the desired values. This is also a straightforward way to quickly configure a server to the desired values and thus unify and code your server farm <code>limits.conf</code> setup.</p><p><strong>Enjoy!</strong></p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7qbvWraagnZWge6S7zGibnq6fpcBwv8StrKllkWKwsLnPpZytnZyuera6y6KkoqyVmXqttcyiq6xlk6S7p3nCqKWfoZeqv6LAyKilZp6fp3q1sdKtoKefXaiys8LEq6po</p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=./two-men-kidnap-father-three-shoot-death-bank-account-road-rage-incident-html.html rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>Two men kidnap Idaho father and shoot him to death before emptying his bank account</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=./65414ed146163fc1148b4594-html.html rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Salernitana golea y conoce la victoria con Guillermo Ochoa en la banca</p></a></div></nav></div><aside class=sidebar><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./french-montanas-solid-wallet-explains-why-he-aint-worried-bout-nothin.html>French Montanas solid wallet explains why he Aint Worried Bout Nothin Tue 5 July 2022</a></li><li class=widget__item><a class=widget__link href=./alan-jackson-new-album-songs-for-mother-daughters.html>Alan Jackson's New Album Features Songs for His Late Mother, More</a></li><li class=widget__item><a class=widget__link href=./article-f1cf0f18-55b5-552e-a3b7-517c726ba35c-html.html>Eagles C Jason Kelce retires after 13 seasons | National</a></li><li class=widget__item><a class=widget__link href=./65b82c73268e3ecb698b458b-html.html>Resultados Progol 2213: premios y quiniela ganadora del fin de semana</a></li><li class=widget__item><a class=widget__link href=./best-cbd-products.html>What Is It, Is It Legal, And Will It Get You High?</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./categories/blog/>blog</a></li></ul></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 JoltVib.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=https://assets.cdnweb.info/hugo/mainroad/js/menu.js></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>